import{a as D,s as f,H as K,f as V,cI as X,W as $,aK as q,a6 as I,ak as C,M as G,c8 as J,S as s,n as d,_ as p,cj as Q,E as U}from"./index.71d27ec8.js";import{u as Y}from"./useSize.7f6a0415.js";import{e as Z}from"./eagerComputed.bf418e4f.js";var ee=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:U.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},ae=D({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:ee(),slots:["icon"],setup:function(e,E){var y=E.slots,g=E.attrs,m=f(!0),j=f(!1),h=f(1),S=f(null),x=f(null),_=K("avatar",e),O=_.prefixCls,W=Y(),n=V(function(){return e.size==="default"?W.value:e.size}),k=X(),c=Z(function(){if($(e.size)==="object"){var r=q.find(function(t){return k.value[t]}),a=e.size[r];return a}}),R=function(a){return c.value?{width:"".concat(c.value,"px"),height:"".concat(c.value,"px"),lineHeight:"".concat(c.value,"px"),fontSize:"".concat(a?c.value/2:18,"px")}:{}},z=function(){if(!(!S.value||!x.value)){var a=S.value.offsetWidth,t=x.value.offsetWidth;if(a!==0&&t!==0){var l=e.gap,o=l===void 0?4:l;o*2<t&&(h.value=t-o*2<a?(t-o*2)/a:1)}}},T=function(){var a=e.loadError,t=a==null?void 0:a();t!==!1&&(m.value=!1)};return I(function(){return e.src},function(){C(function(){m.value=!0,h.value=1})}),I(function(){return e.gap},function(){C(function(){z()})}),G(function(){C(function(){z(),j.value=!0})}),function(){var r,a,t=e.shape,l=e.src,o=e.alt,H=e.srcset,M=e.draggable,N=e.crossOrigin,u=J(y,e,"icon"),i=O.value,w=(r={},s(r,"".concat(g.class),!!g.class),s(r,i,!0),s(r,"".concat(i,"-lg"),n.value==="large"),s(r,"".concat(i,"-sm"),n.value==="small"),s(r,"".concat(i,"-").concat(t),t),s(r,"".concat(i,"-image"),l&&m.value),s(r,"".concat(i,"-icon"),u),r),B=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:u?"".concat(n.value/2,"px"):"18px"}:{},A=(a=y.default)===null||a===void 0?void 0:a.call(y),v;if(l&&m.value)v=d("img",{draggable:M,src:l,srcset:H,onError:T,alt:o,crossorigin:N},null);else if(u)v=u;else if(j.value||h.value!==1){var b="scale(".concat(h.value,") translateX(-50%)"),F={msTransform:b,WebkitTransform:b,transform:b},L=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};v=d(Q,{onResize:z},{default:function(){return[d("span",{class:"".concat(i,"-string"),ref:S,style:p(p({},L),F)},[A])]}})}else v=d("span",{class:"".concat(i,"-string"),ref:S,style:{opacity:0}},[A]);return d("span",p(p({},g),{},{ref:x,class:w,style:[B,R(!!u),g.style]}),[v])}}}),se=ae;export{se as A};
