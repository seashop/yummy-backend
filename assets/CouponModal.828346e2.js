var v=Object.defineProperty,k=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var h=(t,e,u)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u,c=(t,e)=>{for(var u in e||(e={}))x.call(e,u)&&h(t,u,e[u]);if(F)for(var u of F(e))D.call(e,u)&&h(t,u,e[u]);return t},b=(t,e)=>k(t,y(e));var f=(t,e,u)=>new Promise((n,i)=>{var d=a=>{try{o(u.next(a))}catch(r){i(r)}},l=a=>{try{o(u.throw(a))}catch(r){i(r)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(d,l);o((u=u.apply(t,e)).next())});import{B as q}from"./BasicForm.a2791009.js";import{u as P}from"./useForm.ffed4a20.js";import{B as V,b as T}from"./index.519bbcb9.js";import{u as A}from"./useComponentRegister.f9e41cd1.js";import M from"./CouponTime.68c23a48.js";import{a as R,s as _,k as m,f as S,av as $,ax as B,o as E,j as w,y as N,l as O,ay as j}from"./index.05f21f62.js";A("CouponTime",M);const Z=[{title:"\u5E8F\u53F7",dataIndex:"id",fixed:"left",width:60},{title:"\u540D\u79F0",dataIndex:"name",width:200},{title:"\u4F7F\u7528\u6B21\u6570",dataIndex:"status",format:(t,e)=>(e==null?void 0:e.status)===1?"\u4E00\u6B21":"\u4E0D\u9650",width:200},{title:"\u7C7B\u578B",dataIndex:"type",format:(t,e)=>(e==null?void 0:e.type)===1?"\u5E97\u94FA\u4F18\u60E0\u5238":"\u5176\u4ED6",width:200},{title:"\u6EE1\u591A\u5C11",dataIndex:"full",width:200},{title:"\u51CF\u591A\u5C11",dataIndex:"reduce",width:200},{title:"\u6709\u6548\u671F\u5929\u6570",dataIndex:"day",width:200},{title:"\u8D77\u59CB\u65F6\u95F4",dataIndex:"start_time",width:200},{title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"end_time",width:200},{title:"\u5E93\u5B58",dataIndex:"stock",format:(t,e)=>{switch(e==null?void 0:e.stock_limited){case!0:return e.stock;case!1:return"\u65E0\u9650\u5F20"}},width:200},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",width:180}],ee=[{field:"name",label:"\u540D\u79F0",component:"Input",colProps:{span:8}}],L=[{field:"name",label:"\u540D\u79F0",required:!0,component:"Input"},{field:"stock",label:"\u53D1\u653E\u603B\u91CF",helpMessage:"\u5F53\u4E3A0\u65F6,\u65E0\u9650\u53D1\u653E",required:!0,component:"InputNumber",componentProps:({formModel:t})=>({onChange:()=>{t.stock===0?t.stock_limited=0:t.stock_limited=1}}),defaultValue:0},{field:"stock_limited",label:"\u5E93\u5B58\u7C7B\u578B",required:!0,component:"InputNumber",show:!1,defaultValue:0},{field:"full",label:"\u4F7F\u7528\u95E8\u69DB",required:!0,component:"InputNumber"},{field:"reduce",label:"\u4F18\u60E0\u4EF7\u683C",required:!0,component:"InputNumber"},{field:"couponTime",label:"\u7528\u5238\u65F6\u95F4",required:!0,component:"CouponTime",componentProps:({formModel:t})=>({onEffect:e=>{switch(e.state){case 1:t.start_time=e.value[0],t.end_time=e.value[1],t.day=void 0;break;case 2:t.start_time=void 0,t.end_time=void 0,t.day=e.value;break}}}),defaultValue:1},{field:"day",label:"\u6709\u6548\u671F\u5929\u6570",required:!1,show:!1,component:"Input"},{field:"start_time",label:"\u8D77\u59CB\u65F6\u95F4",required:!1,show:!1,component:"Input"},{field:"end_time",label:"\u7ED3\u675F\u65F6\u95F4",required:!1,show:!1,component:"Input"},{field:"status",label:"\u4F7F\u7528\u6B21\u6570",required:!0,component:"RadioGroup",componentProps:{options:[{label:"\u6709\u9650",value:1},{label:"\u65E0\u9650",value:2}]},defaultValue:1}],U=R({name:"CouponModal",components:{BasicModal:V,BasicForm:q},emits:["success","register"],setup(t,{emit:e}){const u=_(!0),n=_(""),[i,{resetFields:d,setFieldsValue:l,validate:o}]=P({labelWidth:90,baseColProps:{span:24},schemas:L,showActionButtonGroup:!1}),[a,{getVisible:r,setModalProps:p,closeModal:C}]=T(s=>f(this,null,function*(){d(),p({confirmLoading:!1}),u.value=!!(s!=null&&s.isUpdate),m(u)&&(n.value=s.record.id,l(c({},s.record)))})),g=S(()=>m(u)?"\u7F16\u8F91\u4F18\u60E0\u5238":"\u65B0\u589E\u4F18\u60E0\u5238");function I(){return f(this,null,function*(){try{const s=yield o();p({confirmLoading:!0}),C(),e("success",{isUpdate:m(u),values:b(c({},s),{id:m(u)?n.value:void 0})})}finally{p({confirmLoading:!1})}})}return{getVisible:r,registerModal:a,registerForm:i,getTitle:g,handleSubmit:I}}});function G(t,e,u,n,i,d){const l=B("BasicForm"),o=B("BasicModal");return E(),w(o,j(t.$attrs,{onRegister:t.registerModal,showFooter:"",title:t.getTitle,width:"500px",onOk:t.handleSubmit}),{default:N(()=>[t.getVisible?(E(),w(l,{key:0,onRegister:t.registerForm},null,8,["onRegister"])):O("",!0)]),_:1},16,["onRegister","title","onOk"])}var z=$(U,[["render",G]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as C,te as a,Z as c,ee as s};
