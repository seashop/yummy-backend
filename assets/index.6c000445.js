var U=Object.defineProperty,x=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var F=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t)=>{for(var n in t||(t={}))D.call(t,n)&&F(e,n,t[n]);if(k)for(var n of k(t))N.call(t,n)&&F(e,n,t[n]);return e},w=(e,t)=>x(e,z(t));var b=(e,t,n)=>new Promise((r,a)=>{var l=o=>{try{i(n.next(o))}catch(s){a(s)}},d=o=>{try{i(n.throw(o))}catch(s){a(s)}},i=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,d);i((n=n.apply(e,t)).next())});import{n as _,b1 as W,av as H,a as R,bf as q,ba as E,eN as V,f as P,v as Y,M as Z,bZ as G,L as J,f3 as Q,be as X,ax as h,o as v,j as K,y as B,i as f,h as $,F as ee,aA as te,q as ne,t as ae,eP as oe}from"./index.6d9bb3fb.js";import{P as se}from"./index.4dd15fe7.js";import{u as re}from"./useHeaderSetting.d07dbab6.js";import le from"./TableItem.d10fb3ce.js";import"./index.8616b7df.js";import"./index.0cbb1b7b.js";import"./useSize.773572b3.js";import"./eagerComputed.9bf0b1d5.js";import"./onMountedOrActivated.ed3eafd4.js";import"./useWindowSizeFn.fcba542a.js";import"./useContentViewHeight.6c9a586b.js";import"./ArrowLeftOutlined.054bc93b.js";import"./index.5df71566.js";import"./transButton.d55d8417.js";function I(e){return e&&e.length?e[0]:void 0}var ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},ce=ie;function L(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){ue(e,a,n[a])})}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(t,n){var r=L({},t,n.attrs);return _(W,L({},r,{icon:ce}),null)};y.displayName="SyncOutlined";y.inheritAttrs=!1;var de=y;const j=["2","3","4"],pe=R({components:{PageWrapper:se,SyncOutlined:de,TableItem:le},setup(){const e=q(),{setMenuSetting:t}=E(),{setHeaderSetting:n}=re(),r=V(),a=P(()=>r.getFloor),l=Y({tables:[],status:0});let d=null;Z(()=>{t({show:!1,hidden:!0}),n({show:!1}),G(),i(),d=setInterval(()=>{},1e4)}),J(()=>{clearInterval(d),d=null});const i=()=>b(this,null,function*(){var m,p,C,O;const c=yield Q({with_status:1});if(l.tables=c.items.map(g=>g),o.value.length==0&&l.tables.length>0&&(a.value,(m=a.value)==null||m.length,((p=a.value)==null?void 0:p.length)===0)){const g=(O=(C=I(l.tables.filter(M=>j.indexOf(M.title[0])!==-1)))==null?void 0:C.title[0])!=null?O:""}}),o=P(()=>(a.value,l.tables.filter(u=>u.title[0]===a.value))),s=u=>b(this,null,function*(){var m;const c=I(l.tables.filter(p=>p.id==u));if(!!c){if(c.remain_carts,c.remain_orders,(m=c.remain_carts)!=null?m:0>1){const p=yield oe({dintbl_id:c.id,is_placed:0})}e.push({path:"/reception/central",query:{id:c.id}})}}),S=()=>{i()},A=u=>{r.setFloor(u)};return w(T({floors:j,getFloor:a},X(l)),{currentTables:o,handelClickTable:s,updateList:S,handleClick:A})}}),me={class:"header-item-box"},fe=["onClick"],ge={class:"item-content"},be=f("div",null,"\u5237\u65B0",-1);function he(e,t,n,r,a,l){const d=h("SyncOutlined"),i=h("TableItem"),o=h("PageWrapper");return v(),K(o,{contentBackground:"",contentFullHeight:""},{headerContent:B(()=>[f("div",me,[(v(!0),$(ee,null,te(e.floors,s=>(v(),$("div",{class:ne(["header-tabs-item",{active:e.getFloor===s}]),key:s,onClick:S=>e.handleClick(s)},[f("div",ge,ae(s)+"\u697C\u5927\u5385",1)],10,fe))),128))]),f("div",{class:"update",onClick:t[0]||(t[0]=(...s)=>e.updateList&&e.updateList(...s))},[_(d),be])]),default:B(()=>[_(i,{tables:e.currentTables,onClick:e.handelClickTable},null,8,["tables","onClick"])]),_:1})}var je=H(pe,[["render",he]]);export{je as default};
