var C=Object.defineProperty,B=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var f=(e,n,o)=>n in e?C(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,p=(e,n)=>{for(var o in n||(n={}))h.call(n,o)&&f(e,o,n[o]);if(E)for(var o of E(n))R.call(n,o)&&f(e,o,n[o]);return e},T=(e,n)=>B(e,b(n));var m=(e,n,o)=>new Promise((s,u)=>{var c=t=>{try{a(o.next(t))}catch(i){u(i)}},l=t=>{try{a(o.throw(t))}catch(i){u(i)}},a=t=>t.done?s(t.value):Promise.resolve(t.value).then(c,l);a((o=o.apply(e,n)).next())});import{B as M}from"./BasicForm.c9112e09.js";import{u as L}from"./useForm.68d81aa3.js";import{s as I}from"./pb.54cd1376.js";import{B as P,b as v}from"./index.98fb7ffc.js";import{a as w,s as S,k as d,f as _,av as y,ax as F,o as U,j as x,y as V,n as $,ay as j}from"./index.897eff97.js";var D=(e=>(e[e.ROLE_UNSPECIFIED=0]="ROLE_UNSPECIFIED",e[e.ROLE_SUPER=100]="ROLE_SUPER",e[e.ROLE_ADMIN=200]="ROLE_ADMIN",e[e.ROLE_SYSTEM=300]="ROLE_SYSTEM",e[e.ROLE_USER=1e3]="ROLE_USER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e))(D||{}),N=(e=>(e[e.STATUS_UNSPECIFIED=0]="STATUS_UNSPECIFIED",e[e.STATUS_BANNED=1]="STATUS_BANNED",e[e.STATUS_LOCKED=2]="STATUS_LOCKED",e[e.STATUS_RESTRICTED=3]="STATUS_RESTRICTED",e[e.STATUS_ACTIVE=4]="STATUS_ACTIVE",e[e.STATUS_VERIFIED=5]="STATUS_VERIFIED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e))(N||{});const Q=[{title:"\u5E8F\u53F7",dataIndex:"id",width:260},{title:"\u7528\u6237\u540D",dataIndex:"loginName",width:120},{title:"\u89D2\u8272",dataIndex:"role",width:200},{title:"\u72B6\u6001",dataIndex:"status",width:200},{title:"\u63CF\u8FF0",dataIndex:"description",width:200}],X=[{field:"loginName",label:"\u7528\u6237\u540D",component:"Input",colProps:{span:8}}],k=[{field:"loginName",label:"\u7528\u6237\u540D",required:!0,component:"Input"},{field:"password",label:"\u5BC6\u7801",required:!0,component:"InputPassword"},{field:"role",label:"\u89D2\u8272",required:!0,component:"Select",componentProps:I(Object.entries(D),function(e,n){return n<1e3&&(e.disabled=!0),e})},{field:"status",label:"\u72B6\u6001",required:!0,component:"Select",componentProps:I(Object.entries(N))},{field:"description",label:"\u63CF\u8FF0",required:!0,component:"Input"}],q=w({name:"UserModal",components:{BasicModal:P,BasicForm:M},emits:["success","register"],setup(e,{emit:n}){const o=S(!0),s=S(""),[u,{resetFields:c,setFieldsValue:l,validate:a}]=L({labelWidth:90,baseColProps:{span:24},schemas:k,showActionButtonGroup:!1}),[t,{setModalProps:i,closeModal:O}]=v(r=>m(this,null,function*(){c(),i({confirmLoading:!1}),o.value=!!(r!=null&&r.isUpdate),d(o)&&(s.value=r.record.id,l(p({},r.record)))})),g=_(()=>d(o)?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458");function A(){return m(this,null,function*(){try{const r=yield a();i({confirmLoading:!0}),O(),n("success",{isUpdate:d(o),values:T(p({},r),{id:d(o)?s.value:void 0})})}finally{i({confirmLoading:!1})}})}return{registerModal:t,registerForm:u,getTitle:g,handleSubmit:A}}});function G(e,n,o,s,u,c){const l=F("BasicForm"),a=F("BasicModal");return U(),x(a,j(e.$attrs,{onRegister:e.registerModal,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:V(()=>[$(l,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Z=y(q,[["render",G]]),ee=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{Z as U,ee as a,Q as c,X as s};
