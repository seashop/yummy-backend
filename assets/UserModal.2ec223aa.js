var A=Object.defineProperty,B=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var f=(e,t,o)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))b.call(t,o)&&f(e,o,t[o]);if(E)for(var o of E(t))R.call(t,o)&&f(e,o,t[o]);return e},T=(e,t)=>B(e,h(t));var m=(e,t,o)=>new Promise((s,u)=>{var d=n=>{try{i(o.next(n))}catch(r){u(r)}},l=n=>{try{i(o.throw(n))}catch(r){u(r)}},i=n=>n.done?s(n.value):Promise.resolve(n.value).then(d,l);i((o=o.apply(e,t)).next())});import{B as M}from"./BasicForm.14194d35.js";import{u as L}from"./useForm.ed4caa1b.js";import{s as I}from"./pb.54cd1376.js";import{B as P,b as v}from"./index.466e72dd.js";import{a as w,s as S,k as c,f as _,av as y,ax as F,o as x,j as U,y as V,n as $,ay as j}from"./index.6d9bb3fb.js";var g=(e=>(e[e.ROLE_UNSPECIFIED=0]="ROLE_UNSPECIFIED",e[e.ROLE_SUPER=100]="ROLE_SUPER",e[e.ROLE_ADMIN=200]="ROLE_ADMIN",e[e.ROLE_SYSTEM=300]="ROLE_SYSTEM",e[e.ROLE_USER=1e3]="ROLE_USER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e))(g||{}),D=(e=>(e[e.STATUS_UNSPECIFIED=0]="STATUS_UNSPECIFIED",e[e.STATUS_BANNED=1]="STATUS_BANNED",e[e.STATUS_LOCKED=2]="STATUS_LOCKED",e[e.STATUS_RESTRICTED=3]="STATUS_RESTRICTED",e[e.STATUS_ACTIVE=4]="STATUS_ACTIVE",e[e.STATUS_VERIFIED=5]="STATUS_VERIFIED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e))(D||{});const Q=[{title:"\u5E8F\u53F7",dataIndex:"id",width:240},{title:"\u7528\u6237\u540D",dataIndex:"loginName",width:120},{title:"\u89D2\u8272",dataIndex:"role",width:200},{title:"\u72B6\u6001",dataIndex:"status",width:200},{title:"\u63CF\u8FF0",dataIndex:"description",width:200},{title:"\u5206\u7EC4",dataIndex:"group_id",format:(e,t)=>{var o;return(o=t==null?void 0:t.group)==null?void 0:o.name},width:80}],X=[{field:"loginName",label:"\u7528\u6237\u540D",component:"Input",colProps:{span:8}}],k=[{field:"loginName",label:"\u7528\u6237\u540D",required:!0,component:"Input"},{field:"password",label:"\u5BC6\u7801",required:!0,component:"InputPassword"},{field:"role",label:"\u89D2\u8272",required:!0,component:"Select",componentProps:I(Object.entries(g),function(e,t){return t<1e3&&(e.disabled=!0),e})},{field:"status",label:"\u72B6\u6001",required:!0,component:"Select",componentProps:I(Object.entries(D))},{field:"description",label:"\u63CF\u8FF0",required:!0,component:"Input"}],q=w({name:"UserModal",components:{BasicModal:P,BasicForm:M},emits:["success","register"],setup(e,{emit:t}){const o=S(!0),s=S(""),[u,{resetFields:d,setFieldsValue:l,validate:i}]=L({labelWidth:90,baseColProps:{span:24},schemas:k,showActionButtonGroup:!1}),[n,{setModalProps:r,closeModal:C}]=v(a=>m(this,null,function*(){d(),r({confirmLoading:!1}),o.value=!!(a!=null&&a.isUpdate),c(o)&&(s.value=a.record.id,l(p({},a.record)))})),N=_(()=>c(o)?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458");function O(){return m(this,null,function*(){try{const a=yield i();r({confirmLoading:!0}),C(),t("success",{isUpdate:c(o),values:T(p({},a),{id:c(o)?s.value:void 0})})}finally{r({confirmLoading:!1})}})}return{registerModal:n,registerForm:u,getTitle:N,handleSubmit:O}}});function G(e,t,o,s,u,d){const l=F("BasicForm"),i=F("BasicModal");return x(),U(i,j(e.$attrs,{onRegister:e.registerModal,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:V(()=>[$(l,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Z=y(q,[["render",G]]),ee=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{Z as U,ee as a,Q as c,X as s};
