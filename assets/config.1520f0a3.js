var G=Object.defineProperty;var w=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var P=(t,r,n)=>r in t?G(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,V=(t,r)=>{for(var n in r||(r={}))O.call(r,n)&&P(t,n,r[n]);if(w)for(var n of w(r))R.call(r,n)&&P(t,n,r[n]);return t};var _=(t,r,n)=>new Promise((e,u)=>{var o=i=>{try{p(n.next(i))}catch(c){u(c)}},s=i=>{try{p(n.throw(i))}catch(c){u(c)}},p=i=>i.done?e(i.value):Promise.resolve(i.value).then(o,s);p((n=n.apply(t,r)).next())});import{a0 as U,ez as K,eA as k,aX as N,aV as W,aW as q,eB as X,eC as Z,eD as M,eE as D,av as H,a as J,B as Q,aZ as Y,s as j,f as I,a6 as rr,di as g,ax as l,o as A,j as L,y as b,n as y,h as tr,F as nr,aA as or,i as S,z as $,bs as ar,cA as er,D as ir}from"./index.6d9bb3fb.js";import{C as sr}from"./index.09b81e2e.js";import{T as x}from"./index.400f6c41.js";/* empty css               */import{B as ur}from"./BasicForm.14194d35.js";import{u as cr}from"./useForm.ed4caa1b.js";import{a as pr,b as mr}from"./inns.7c794ab7.js";import{b as F}from"./club.39955e46.js";import"./index.4c6eb790.js";import{b as fr}from"./_baseIteratee.9382b511.js";import{a as dr}from"./index.0de23d03.js";import"./index.76dc212d.js";import"./index.edddeece.js";import"./Col.e4a1ee5d.js";import"./useFlexGapSupport.4090089e.js";import"./useRefs.913cb0c7.js";import"./PlusOutlined.0d38b9f8.js";/* empty css              */import"./index.427c9aa1.js";import"./index.f5fff581.js";import"./Checkbox.573d65ae.js";import"./index.67c9f654.js";import"./index.4b6dad8a.js";import"./index.60b81322.js";import"./index.6f0246c2.js";import"./index.f8b4f42d.js";import"./useFormItem.8ad155b2.js";import"./index.a6b1d5e2.js";import"./get.8fe78ec1.js";import"./index.e8fc2939.js";import"./eagerComputed.9bf0b1d5.js";import"./DeleteOutlined.e565875c.js";import"./transButton.d55d8417.js";import"./index.561ec7f5.js";import"./index.466e72dd.js";import"./useWindowSizeFn.fcba542a.js";import"./FullscreenOutlined.c5d2b1bc.js";import"./index.8e7a8568.js";import"./index.0d84ec2e.js";import"./index.9fac26a9.js";import"./uuid.2b29000c.js";import"./download.812ffb10.js";import"./base64Conver.08b9f4ec.js";import"./index.31b2292b.js";import"./index.3f358908.js";import"./Form.156a57f0.js";import"./useSize.773572b3.js";import"./uniqBy.7e5adb09.js";function lr(t,r){var n=-1,e=U(t)?Array(t.length):[];return dr(t,function(u,o,s){e[++n]=r(u,o,s)}),e}function gr(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}function br(t,r){if(t!==r){var n=t!==void 0,e=t===null,u=t===t,o=K(t),s=r!==void 0,p=r===null,i=r===r,c=K(r);if(!p&&!c&&!o&&t>r||o&&s&&i&&!p&&!c||e&&s&&i||!n&&i||!u)return 1;if(!e&&!o&&!c&&t<r||c&&n&&u&&!e&&!o||p&&n&&u||!s&&u||!i)return-1}return 0}function yr(t,r,n){for(var e=-1,u=t.criteria,o=r.criteria,s=u.length,p=n.length;++e<s;){var i=br(u[e],o[e]);if(i){if(e>=p)return i;var c=n[e];return i*(c=="desc"?-1:1)}}return t.index-r.index}function Cr(t,r,n){r.length?r=k(r,function(o){return N(o)?function(s){return W(s,o.length===1?o[0]:o)}:o}):r=[q];var e=-1;r=k(r,X(fr));var u=lr(t,function(o,s,p){var i=k(r,function(c){return c(o)});return{criteria:i,index:++e,value:o}});return gr(u,function(o,s){return yr(o,s,n)})}var Br=Z(function(t,r){if(t==null)return[];var n=r.length;return n>1&&M(t,r[0],r[1])?r=[]:n>2&&M(r[0],r[1],r[2])&&(r=[r[0]]),Cr(t,D(r,1),[])}),_r=Br;const kr=J({name:"ConfigManagement",components:{Button:Q,Card:sr,Tabs:x,TabPane:x.TabPane,BasicForm:ur},setup(){var h,v;const r=(v=(h=Y().params)==null?void 0:h.id)!=null?v:"",{createMessage:n}=ir(),e=j(F.CAT_VARIABLE),u=j([{id:-1,scope:F.CAT_VARIABLE,title:"\u57FA\u7840\u4FE1\u606F"},{id:-2,scope:F.CAT_PRINTER,title:"\u6253\u5370\u673A"}]),o=I(()=>u.value.map((m,f)=>(f===0&&(e.value=m.scope),{title:m.title,scope:m.scope}))),[s,{appendSchemaByField:p,resetSchema:i,validate:c,setFieldsValue:C,resetFields:d}]=cr({size:"default",baseColProps:{span:24},labelWidth:160,showActionButtonGroup:!1,schemas:[]});rr([e],()=>_(this,null,function*(){i([]);let{innConfigs:m}=yield yield pr(r,e.value),f={};m&&(m=_r(m,function(a){return a.sortId})),m==null||m.forEach(a=>{var E,T;const B={field:a.key,component:a.component,label:a.title,required:!0};switch(a.props instanceof Object&&g(B,"componentProps",V({},a.props)),a.component){case"Switch":g(f,a.key,((E=a.value)==null?void 0:E.toString())==="true");break;case"RadioGroup":case"InputNumber":g(f,a.key,parseInt((T=a.value)==null?void 0:T.toString()));break;default:g(f,a.key,a.value);break}p(B,"")}),C(f)}),{immediate:!0});function z(){return _(this,null,function*(){try{const m=yield c(),f=Object.entries(m).map(a=>ar(a[1])?{key:a[0],value:a[1]?"true":"false"}:er(a[1])?{key:a[0],value:a[1].toString()}:{key:a[0],value:a[1]});return mr(r,f).then(()=>{n.success("\u4FEE\u6539\u6210\u529F")})}catch(m){}})}return{tabs:o,activeKey:e,register:s,resetFields:d,handleSubmit:z}}}),Ar={class:"flex flex-col items-center justify-center py-8 bg-white"},Fr={class:"flex justify-center"};function hr(t,r,n,e,u,o){const s=l("TabPane"),p=l("Tabs"),i=l("BasicForm"),c=l("Button"),C=l("Card");return A(),L(C,{title:"\u5546\u6237\u914D\u7F6E"},{default:b(()=>[y(p,{activeKey:t.activeKey,"onUpdate:activeKey":r[0]||(r[0]=d=>t.activeKey=d)},{default:b(()=>[(A(!0),tr(nr,null,or(t.tabs,d=>(A(),L(s,{key:d.scope,tab:d.title},null,8,["tab"]))),128))]),_:1},8,["activeKey"]),S("div",Ar,[y(i,{onRegister:t.register},null,8,["onRegister"]),S("div",Fr,[y(c,{onClick:t.resetFields},{default:b(()=>[$(" \u91CD\u7F6E ")]),_:1},8,["onClick"]),y(c,{class:"!ml-4",type:"primary",onClick:t.handleSubmit},{default:b(()=>[$(" \u786E\u8BA4 ")]),_:1},8,["onClick"])])])]),_:1})}var _t=H(kr,[["render",hr]]);export{_t as default};
